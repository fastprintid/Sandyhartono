<odoo>
	<data>

<!--  -->
		<record id="view_model_fields_form_inherit" model="ir.ui.view">
			<field name="model">ir.model.fields</field>
			<field name="inherit_id" ref="base.view_model_fields_form" />
			<field name="arch" type="xml">
				<xpath expr="//sheet" position="before">
					<header position='inside'>
						<button name="toggle_webhook" string="Webhook" type="object" />
					</header>
				</xpath>
				<field name='model_id' position="after">
					<field name="webhook"/>
				</field>
			</field>
		</record>

		<record id="view_model_form_inherit" model="ir.ui.view">
			<field name="model">ir.model</field>
			<field name="inherit_id" ref="base.view_model_form" />
			<field name="arch" type="xml">
				<xpath expr="//sheet" position="before">
					<header>
						<button type="object" name="init_webhook"
							string="Initialize Webhook" />
					</header>
				</xpath>
				<field name="modules" position="before">
					<field name="webhook" />
				</field>
				<xpath expr="//field[@name='field_id']" position="attributes">
					<attribute name='options'>{'reload_on_button': true}</attribute>
				</xpath>
				<xpath expr="//field[@name='field_id']/tree" position="attributes">
					<attribute name='decoration-success'>webhook</attribute>
					<!-- <attribute name='default_order'>webhook</attribute> -->
				</xpath>
				<xpath expr="//field[@name='field_id']/tree" position="inside">
					<field name="webhook" />
					<button name="toggle_webhook" type="object" string='Toggle webhook'/>
				</xpath>
				<xpath expr="//page[1]" position="before">
					<page string="Webhook"
						attrs="{'invisible':[('webhook','=',False)]}">
						<field name="webhook_ids" />
					</page>
					<page string="Webhook Field"
						attrs="{'invisible':[('webhook','=',False)]}">
						<field name="webhook_field_ids" />
					</page>
					<page string="Webhook MQ"
						attrs="{'invisible':[('webhook','=',False)]}">
						<field name="webhook_mq_ids">
							<tree>
								<field name="write_date" />
								<field name="status_code" />
							</tree>
						</field>
					</page>
				</xpath>
			</field>
		</record>

		<record id="webhook_get_records_wizard" model="ir.ui.view" >
			<field name="name">webhook.get.records.wizard</field>
			<field name="model">webhook.get.records.wizard</field>
			<field name="arch" type="xml">
				<form>
					<div style="white-space: pre-line;">
						<p><h5>Select model to get data from IZI.</h5></p>
					</div>
					<group>
						<group>
							<field name="model_id"/>
						</group>
						<group>
						</group>
					</group>
					<footer>
						<button type="object" name="process_wizard" string="Process" class="oe_highlight"/>
						or
						<button string="Cancel" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>

		<record id="webhook_get_custom_model_records_wizard" model="ir.ui.view">
			<field name="name">webhook.get.custom.model.records.wizard</field>
			<field name="model">webhook.get.custom.model.records.wizard</field>
			<field name="arch" type="xml">
				<form>
					<div style="white-space: pre-line;">
						<p>
							<h5>Select model to get data from IZI.</h5>
						</p>
					</div>
					<group>
						<field name="custom_model_name"/>
						<field name="custom_model_url"/>
					</group>
					<footer>
						<button type="object" name="process_wizard" string="Process" class="oe_highlight"/>
						or
						<button string="Cancel" class="oe_link" special="cancel" />
					</footer>
				</form>
			</field>
		</record>

		<record id="view_webhook_server_form" model="ir.ui.view">
			<field name="model">webhook.server</field>
			<field name="arch" type="xml">
				<form string="Webhook Server">
					<header>
						<button type="object" name="initialize" string="Initialize" />
						<button type="object" name="sync_product" string="Sync Product" />
						<button type="object" name="sync_order" string="Sync Order" />
						<button class="oe_highlight" type="object" name="sync_latest_order" string="Sync Latest Orders" />
						<!-- <button type="object" name="auth_login" string="Auth Login" />
						<button type="object" name="get_access_token" string="OAuth Login" />
						<button class="oe_highlight" type="object" name="get_products" string="Get Products" />
						<button class="oe_highlight" type="object" name="get_orders" string="Get Orders" />
						<button type="object" name="get_orders_dependency" string="Get Orders Dependency" />
						<button type="object" name="get_product_category" string="Get Product Category" />
						<button type="object" name="get_product_dependency" string="Get Product Dependency" /> -->
						<!-- <button type="object" name="open_get_custom_model_records_wizard" string="Get Custom Model Records" /> -->
						<!-- <button type="object" name="open_get_records_wizard" string="Get Records" /> -->
						<!-- <button type="object" name="init_webhook" string="Initialize Webhook" invisible='0' groups='base.group_no_one' /> -->
					</header>
					<sheet>
						<group>
							<group>
								<field name="name" />
								<field name="username" />
								<field name="password" password="1" />
								<field name="session_id" readonly="1" />
								<field name="cron_id" />
							</group>
							<group>
								<field name="active" />
								<field name="compress" />
								<field name="is_sync" widget='boolean_toggle'/>
							</group>
						</group>
						<group invisible='1'>
							<field name="access_token" readonly="1" />
							<field name="expires_at" readonly="1" />
						</group>
						<notebook>
							<page string="Model">
								<field name="model_ids" options="{'reload_on_button': true}">
									<tree decoration-muted="(not webhook_field_ids)">
										<field name="model" />
										<field name="name" />
                                        <field name="webhook_field_ids" />
                                        <!-- <button name="set_default_webhook" string="Add default fields" type="object"/> -->
									</tree>
								</field>
								<button name="build_dependency" type="object"
									string="Build Dependency" />
								<button name="clear_dependency" type="object"
									string="Clear Dependency" />
								<button name="build_dependency_field" type="object"
									string="Build Dependency Field" />
								<button name="clear_dependency" type="object"
									string="Clear Dependency" />
								<button name="set_default_available_webhook"
									type="object"
									string="Get default Model &amp; Fields" />
							</page>
							<page string="MQ">
								<field name="mq_ids" />
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="view_webhook_server_tree" model="ir.ui.view">
			<field name="model">webhook.server</field>
			<field name="arch" type="xml">
				<tree string="Webhook Server" decoration-muted="(not active)">
					<field name="name" />
					<field name="active" widget='boolean_toggle'/>
				</tree>
			</field>
		</record>

		<record id="view_webhook_server_mq_tree" model="ir.ui.view">
			<field name="model">webhook.server.mq</field>
			<field name="arch" type="xml">
				<tree string="Webhook Server MQ" decoration-danger="(retry)">
					<field name="write_date" />
					<field name="res_model_id" />
					<field name="status_code" />
					<field name="retry" />
					<field name="is_patch" />
					<button name="send_request" string="Manual sync" type="object" class='btn btn-sm btn-warning'/>
				</tree>
			</field>
		</record>

		<record id="view_webhook_server_search" model="ir.ui.view">
			<field name="model">webhook.server</field>
			<field name="arch" type="xml">
				<search string="Webhook Server">
					<field name="name" />
					<field name="active" />
					<separator />
					<filter string="All" name="all"
						domain="['|',('active','=',False),('active','=',True)]" />
				</search>
			</field>
		</record>

		<record id="webhook_server_act" model="ir.actions.act_window">
			<field name="name">Webhook Server</field>
			<field name="res_model">webhook.server</field>
			<field name="view_mode">tree,form</field>
			<field name="context">{'search_default_all': 1}</field>
            <field name="search_view_id" ref="view_webhook_server_search"/>
		</record>

		<record id="webhook_server_mq_act"
			model="ir.actions.act_window">
			<field name="name">Webhook Server MQ</field>
			<field name="res_model">webhook.server.mq</field>
			<field name="view_mode">tree,form</field>
		</record>

		<menuitem name="IZI Integration"
			id="menu_webhook" sequence="300"
            web_icon="juragan,static/description/icon.png" />
            <menuitem name="Server Configuration"
            	id="menu_webhook_server"
				parent="menu_webhook"
				action="webhook_server_act"/>
			<menuitem name="Message Queue"
				id="menu_webhook_mq"
				parent="menu_webhook"
				action="webhook_server_mq_act" />
	</data>
</odoo>